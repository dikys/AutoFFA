/**
 * Настройки игрового режима Auto FFA.
 * Хост может изменять значения в этом файле перед началом игры.
 */
export class AutoFFASettings {
    // ===============================================================
    // ===                   УСЛОВИЯ ПОБЕДЫ                        ===
    // ===============================================================

    /**
     * Условие победы: по очкам силы.
     * Если true, игра заканчивается, когда один из игроков набирает `powerPointsForVictory` очков.
     * Если false, игра заканчивается, когда остается одна команда.
     */
    public victoryByPowerPoints: boolean = true;

    /** Количество очков силы, необходимое для победы, если включено `victoryByPowerPoints`. */
    public powerPointsForVictory: number = 10000;

    // ===============================================================
    // ===               ОСНОВНЫЕ ПРАВИЛА ИГРЫ                     ===
    // ===============================================================

    /** Начальное количество очков влияния у каждого игрока. */
    public initialPowerPoints: number = 1500;

    /** Длительность мирного договора в тиках (1 минуты = 1 * 60 * 50 = 3000). */
    public temporaryPeaceDurationTicks: number = 3000;

    /** Включить ли механику коалиций против доминирующей команды. */
    public enableCoalitionsAgainstLeader: boolean = true;

    /** Максимальная разница в силе (в процентах), при которой возможно объединение в коалицию. */
    public maxStrengthDifferenceForCoalitionPercent: number = 30;

    /** 
     * Включить ли ослабление эффекта "снежного кома".
     * Если включено, при поражении сюзерена победитель забирает только его,
     * а все вассалы проигравшего становятся независимыми.
     * Если выключено, победитель поглощает всю команду проигравшего.
     */
    public weakenSnowballEffect: boolean = false;

    /** Коэффициент набора очков силы */
    public powerPointPerHpCoeff: number = 0.0025; 

    /** Коэффициент набора очков силы при максимальном удалении */
    public powerPointCoeffByMaxDistance: number = 3;

    /**
     * Включить ли ограничение на максимальное количество очков, получаемых за победу.
     * Если включено, количество распределяемых очков не может превышать
     * `maxSpoilsOfWarPercentage` от `initialPowerPoints`.
     */
    public limitSpoilsOfWar: boolean = true;

    /**
     * Максимальный процент от `initialPowerPoints`, который может быть распределен в качестве трофеев за победу.
     * Например, 0.20 означает, что максимум 20% от начальных очков силы можно получить за одно поражение.
     */
    public maxSpoilsOfWarPercentage: number = 0.20;

    // ===============================================================
    // ===                   БАЛАНС КОМАНД                         ===
    // ===============================================================

    /**
     * Включить ли механику 'Вызов системе'.
     * Позволяет вручную задать состав команд.
     * Поселения с никами 'князъ' или 'повелитель' (без учета регистра)
     * объединяются в одну команду, а все остальные - в другую.
     */
    public isChallengeSystemEnabled: boolean = false;

    // ===============================================================
    // ===               БАЛАНСИРОВКА КОМАНД                       ===
    // ===============================================================

    /**
     * Включить ли механику автоматической балансировки команд.
     * Если включено:
     * 1. В начале игры игроки делятся на 2 команды по географическому признаку.
     * 2. Периодически происходит перебалансировка сил путем перемещения игроков.
     * 3. Экономические параметры вассалов и награды за очки силы увеличены.
     */
    public enableTeamBalancing: boolean = true;

    // ===============================================================
    // ===                   НАЧАЛО ИГРЫ                           ===
    // ===============================================================

    /** Включить ли начальный мирный период, чтобы игроки могли развиться. */
    public enableInitialPeacePeriod: boolean = false;

    /** Длительность начального мирного периода в тиках (5 минут = 5 * 60 * 50 = 15000). */
    public initialPeaceDurationTicks: number = 15000;

    // ===============================================================
    // ===               ДИНАМИЧЕСКИЕ МЕХАНИКИ                     ===
    // ===============================================================

    /** 
     * Включить ли механику "Награда за голову".
     * Периодически самый сильный игрок (лидер по очкам) будет становиться целью,
     * атака на которую приносит больше очков. Это механика "царь горы".
     */
    public enableBountyOnLeader: boolean = false;

    /** Как часто проверять и назначать новую "Награду за голову" в тиках (1 минута = 3000). */
    public bountyCheckIntervalTicks: number = 3000;

    /** Множитель очков влияния, получаемых при атаке игрока с "Наградой за голову". */
    public bountyPowerPointsMultiplier: number = 3;

    /**
     * Включить ли механику "Цель".
     * Каждому игроку назначается случайная вражеская цель, атака которой приносит больше очков.
     */
    public enableTargetSystem: boolean = true;

    /** Множитель очков влияния, получаемых при атаке назначенной цели. */
    public targetPowerPointsMultiplier: number = 6;

    /**
     * Включить ли сообщения о результатах битвы.
     * Если игрок не получает очки силы в течение некоторого времени, ему придет сообщение с итогом.
     */
    public enableBattleSummaryMessages: boolean = false;

    /** Время в тиках, после которого битва считается оконченной, если не было получено новых очков силы (1 минута = 3000). */
    public battleSummaryTimeoutTicks: number = 3000;

    /**
     * Включить ли сообщения об изменении очков силы (за верность, щедрость, атаки и т.д.)
     * Сообщение отправляется вместе с получением награды за очки силы.
     */
    public enablePowerPointsChangeSummary: boolean = false;

    // ===============================================================
    // ===                   ЭКОНОМИКА ВАССАЛОВ                      ===
    // ===============================================================

    /** Количество каждого ресурса, которое вассал может хранить до уплаты дани. */
    public vassalResourceLimit: number = 1000;

    /** Лимит населения для вассала. */
    public vassalPopulationLimit: number = 60;

    /** Какой процент от очков влияния конвертируется в ресурсы в качестве награды. */
    public powerPointsRewardPercentage: number = 0.10;

    // ===============================================================
    // ===                  ЭКОНОМИКА СЮЗЕРЕНА                     ===
    // ===============================================================

    /** Порог ресурсов в казне сюзерена, после которого он начинает делиться с вассалами. */
    public suzerainGenerosityThreshold: number = 5000;

    // ===============================================================
    // ===       ЭКОНОМИКА ВЗАИМОДЕЙСТВИЙ СЮЗЕРЕНА И ВАССАЛА       ===
    // ===============================================================

    /**
     * Включить ли обмен очками силы при передаче ресурсов между сюзереном и вассалом.
     * Если включено, сюзерен отдает очки за дань, а вассал - за щедрость.
     */
    public enablePowerPointsExchange: boolean = true;

    /**
     * Коэффициент обмена очков силы на ресурсы.
     * Определяет, сколько очков силы передается за каждую единицу суммарной стоимости ресурсов (золото+дерево+металл).
     * Например, при значении 0.05 за 1000 ресурсов будет передано 50 очков.
     */
    public powerPointsExchangeRate: number = 0.05;
}
